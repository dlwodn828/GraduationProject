<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, shrink-to-fit=no, user-scalalbe=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Sweet Alert -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script src="/assets/freelancer/vendor/jquery/jquery.min.js"></script>
    <script src="/assets/freelancer/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/assets/freelancer/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="/assets/freelancer/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Contact Form JavaScript --><!--contact_me error-->
    <!-- <script src="/assets/freelancer/js/jqBootstrapValidation.js"></script> -->
    <!-- <script src="/assets/freelancer/js/contact_me.js"></script> -->

    <!-- Custom scripts for this template -->
    <!-- <script src="/assets/freelancer/js/freelancer.min.js"></script> -->
    <!-- Bootstrap core CSS -->
    <link href="/assets/freelancer/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="/assets/freelancer/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="/assets/freelancer/vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Jua" rel="stylesheet"> -->
    <link href="/assets/freelancer/css/freelancer.min.css" rel="stylesheet">
    <link href="/assets/ref/timeline/timeline2.css" rel="stylesheet">
    <link href="/assets/ref/missionbox.css" rel="stylesheet">
    <link href="/assets/ref/piggybank.css" rel="stylesheet">
    <link href="/assets/ref/scroll.css" rel="stylesheet">
    <link href="/assets/ref/fireworks.css" rel="stylesheet">
    <script src="/assets/ref/piggybank.js"></script>
    <script src="/assets/ref/addcomma.js"></script>
    <script src="/assets/ref/timeline/timeline.js"></script>
    
    <!-- <script src='http://code.jquery.com/jquery-3.3.1.slim.min.js'></script>
    <script src='/assets/jquerykeyframes/jquery.keyframes.js'></script> -->
    <title>Pigmong</title>
    <style>
    @font-face { font-family: 'designhouseOTFLight00'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_three@1.0/designhouseOTFLight00.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: '777Balsamtint'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_nine_@1.1/777Balsamtint.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'YanoljaYacheR'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/YanoljaYacheR.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'S-CoreDream-1Thin'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-1Thin.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'S-CoreDream-3Light'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'NIXGONL-Vb'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/NIXGONL-Vb.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'Goyang'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/Goyang.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: '777Balsamtint'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_nine_@1.1/777Balsamtint.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: '777Kidbutterfly'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_nine_@1.1/777Kidbutterfly.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: '777Flowerbear'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_nine_@1.1/777Flowerbear.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'BBTreeGR'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_nine_@1.1/BBTreeGR.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'Godo'; font-style: normal; font-weight: 400; src: url('//cdn.jsdelivr.net/korean-webfonts/1/corps/godo/Godo/GodoM.woff2') format('woff2'), url('//cdn.jsdelivr.net/korean-webfonts/1/corps/godo/Godo/GodoM.woff') format('woff'); } @font-face { font-family: 'Godo'; font-style: normal; font-weight: 700; src: url('//cdn.jsdelivr.net/korean-webfonts/1/corps/godo/Godo/GodoB.woff2') format('woff2'), url('//cdn.jsdelivr.net/korean-webfonts/1/corps/godo/Godo/GodoB.woff') format('woff'); } .godo * { font-family: 'Godo', sans-serif; }
    @font-face { font-family: '777Littlebear'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_nine_@1.1/777Littlebear.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'MOF_M'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/MOF_M.woff') format('woff'); font-weight: normal; font-style: normal; }
    @font-face { font-family: 'KOMACON'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_seven@1.2/KOMACON.woff') format('woff'); font-weight: normal; font-style: normal; }
    body>*{font-family: 'KOMACON'; }
    *{font-family: 'KOMACON';}
    h1, h2, h3, h4, h5, h6, span {
    font-family: 'KOMACON';
    }
    /* span{font-family: '777Kidbutterfly'; } */
    @import url(https://fonts.googleapis.com/css?family=Bitter:400,400italic,700);
        button:focus { outline:none; }
        * {
        box-sizing: border-box;
        /* font-family:jua; */
        }

        html,
        body {
        width: 100%;
        height: 100%;
        }


        h2 {
        font-size: 2.5rem;
        font-weight: bold;
        text-transform: uppercase;
        }

        a {
        text-decoration: none !important ;
        /* font-family:jua; */
        }


        


        .nav {
            width: 100%;
            /* font-size: 0; */
            /* height:100px; */
            width: 100%;
            position: fixed;
            left: 0;
            bottom: 0;
            z-index:1000;
            /* box-shadow: 0px 0px 25px #656668; */
            box-shadow: 0px 0px 10px #656668;
            
       
            
        }

        .nav_item {
            display: inline-block;
            font-size: 1rem;
            padding: 0.5rem;
            width: 33.3%;
            color: black;
            background-color:white;
            text-align: center;
            /* transition: all .2s ease-in-out; */
            margin-bottom:0px;
            bottom:0;

        }
        .nav_item_p {
            display: inline-block;
            font-size: 1rem;
            padding: 0.5rem;
            width: 50%;
            color: black;
            background-color: white;
            text-align: center;
            /* transition: all .2s ease-in-out; */
            margin-bottom:0px;
            bottom:0;

            
        }


        .section {
        }

        .tabs {
            position: relative;
            color:gray;
        }
        .first-time,
        .tab {
        width: 100%;
        margin: 7rem auto;
        text-align: center;
        position: absolute;
        top: 0;
        /* opacity: 0; */
        /* transform: translateY(3rem); */
        /* transition: all .5s cubic-bezier(.2, 0, 0, 1); */
        }

        .tab:target {
        opacity: 1;
        transform: translateY(0);
        /* transition-delay: .5s; */
        }
        
        .nav_tabs > *{
            /* border-right:1px solid gray; */
        }
        .nav_parents{

        }

        @font-face {
        font-family: 'Lato';
        font-style: normal;
        font-weight: 400;
        src: local('Lato Regular'), local('Lato-Regular'), url(https://fonts.gstatic.com/s/lato/v15/S6uyw4BMUTPHjx4wWw.ttf) format('truetype');
        }
        ol,
        ul {
        list-style: none;
        }
        /* * {
        margin: 0;
        padding: 0;
        }
        *,
        *:after,
        *:before {
        box-sizing: border-box;
        }
        a {
        color: #000;
        text-decoration: none;
        }
        html {
        line-height: 1.2;
        }
        body {
        background-color: #fff;
        color: #333;
        font-family: "Lato", arial, sans-serif;
        font-size: 16px;
        } */
        header {
        background-color: #fff;
        background-color: rgba(255, 255, 255, 0);
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
        height: 50px;
        }
        .logo {
        color: #fff;
        font-size: 20px;
        line-height: 50px;
        padding: 0 0 0 20px;
        text-transform: capitalize;
        }
        /* menu button */
        .menuBtn {
        height: 30px;
        width: 30px;
        position: absolute;
        right: 20px;
        top: 10px;
        z-index: 101;
        }
        .menuBtn > span {
        background-color: #fff;
        border-radius: 1px;
        height: 2px;
        width: 100%;
        position: absolute;
        left: 50%;
        top: 50%;
        margin: -1px 0 0 -15px;
        transition: height 100ms;
        }
        .menuBtn > span:after,
        .menuBtn > span:before {
        content: "";
        background-color: #fff;
        border-radius: 1px;
        height: 2px;
        width: 100%;
        position: absolute;
        left: 50%;
        margin-left: -15px;
        transition: all 200ms;
        }
        .menuBtn > span:after {
        top: -7px;
        }
        .menuBtn > span:before {
        bottom: -7px;
        }
        .menuBtn.act > span {
        height: 0;
        }
        .menuBtn.act > span:after,
        .menuBtn.act > span:before {
        background-color: #008877;
        top: 1px;
        }
        .menuBtn.act > span:after {
        -webkit-transform: rotate(45deg);
                transform: rotate(45deg);
        }
        .menuBtn.act > span:before {
        -webkit-transform: rotate(-45deg);
                transform: rotate(-45deg);
        }
        /* main menu block */
        .mainMenu {
        border-bottom:5px solid #a4d7dc;
        background-color: #fff;
        position: absolute;
        left: 0;
        top: 0;
        z-index: 100;
        height: auto;
        width: 100%;
        display: table;
        text-align: center;
        opacity: 0;
        transition: all 500ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
        -webkit-transform: scale(0);
                transform: scale(0);
        }
        .mainMenu.act {
        opacity: 1;
        -webkit-transform: scale(1);
                transform: scale(1);
        }
        .mainMenu.act ul li {
            height:232px;
        opacity: 1;
        -webkit-transform: translateX(0);
                transform: translateX(0);
        }
        .mainMenu ul {
        height: 696px;
        /* border-bottom: 2px solid gray; */
        display: table-cell;
        vertical-align: middle;
        }
        .mainMenu li {
        padding: 8px 0;
        transition: all 400ms 510ms;
        opacity: 0;
        }
        .mainMenu li:nth-child(odd) {
        -webkit-transform: translateX(30%);
                transform: translateX(30%);
        }
        .mainMenu li:nth-child(even) {
        -webkit-transform: translateX(-30%);
                transform: translateX(-30%);
        }
        .mainMenu li:last-child {
        -webkit-transform: none;
                transform: none;
        }
        .mainMenu a {
        color: #19b698;
        display: inline-block;
        font-size: 18px;
        }
        .mainMenu a.suBtn {
        color: #fff;
        }
        /* sign up button */
        .suBtn {
        background-color: #19b698;
        border-radius: 5px;
        padding: 10px 20px;
        }
        #mainNav{
            background-color:#bee1e5;
        }
        .title1{
            color:#e39897;
            font-family:'KOMACON';
            margin-left:150px;
            margin-top:-5px;
        }

        .badge1{
            bottom: 55px;
            position: fixed;
            display: block;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: red;
            z-index: 1000;
            box-shadow: 0px 0px 3px 0px #202020;
        }
        .badge2{
            bottom: 55px;
            position: fixed;
            display: block;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: red;
            z-index: 1000;
            box-shadow: 0px 0px 3px 0px #202020;
        }
        #mbadge{
            text-align: center;
            right: 140px;
            color:white;
            z-index:1001;
        }
        #sbadge{
            color: white;
            right: 10px;
            text-align: center;
            
        }
        .badge1:empty {
            display: none;
        }
        .badge2:empty {
            display: none;
        }
        /* .toggleBadge{
            display:none;
        } */
        .tab_white{
            display:none;
        }
        .right_nav_li > a{
            color:#48adbc;
        }
        .rNavLi{
            display:block;
        }
        .rNavLi_content{

        }
        /* .rNav_1{
            display: inline-block;
    margin-top: 50px;
    margin-bottom: 10px;
        } */
    </style>
</head>
<body>
    <nav class="fixed-top " id="mainNav">
        <!-- <ul class="nav navbar-nav navbar-right">
        <li class="dropdown navbar-user">
            <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown"> -->
            <!-- <span id="clock" class="text-primary m-r-20"></span> -->
            <!--<img src="/assets/img/user-13.jpg" alt="" />-->

            <!-- <div id="hbg"> -->
                <!-- <div class="middle_wrap">
                    </div> -->

                                              
                    <div class="mainContainer">
                        <header>
                            <!-- <a href="#" class="logo">logo</a> -->
                            <!-- <h3 class="text-center title1">Pigmong </h3> -->
                            <img class="text-center title1" src="/assets/freelancer/img/logo.png" style="max-width:30%;height:auto;"alt="">
                            <a href="#" class="menuBtn">
                                <img src="/assets/freelancer/img/usericon.png" id="hbg" class="fa fa-bars" aria-hidden="true" style="max-width:80%;margin-top:10px;">
                            </a>
                            <nav class="mainMenu">
                                <ul style="padding-left:0px;">
                                    <li class="rNav_1" style="background-image:url('/assets/freelancer/img/mypage_back.png');    background-size: contain;font-size:1.4rem;"><br><br><br><span class="rNavLi_content"><?=$this->session->userdata('AdminId')?>님,</span><br><span style="font-weight:100;">안녕하세요!</span><br><br><a href="/auth/logoutProc" class="suBtn" style="background-color:#a4d7dc;color:white;">로그아웃</a></li>
                                    <li style="background:#a4d7dc; "><span class="rNavLi" style="float:left;margin-left:10px;">계좌 정보 ></span> <br><img src="/assets/freelancer/img/mypage_wallet.png" style="max-width:20%;margin-bottom:10px;"><br> <span class="rNavLi_content" style="font-size:1.2rem;display:block;"><?=$this->session->userdata('AdminWallet')?></span><br><span class="rNavLi_content rNaviLi_content_wb1"style="font-size:2.5rem;"><?=$this->session->userdata('AdminWbalance')?></span>원</li>
                                    <li style="background:white; "><span class="rNavLi" style="float:left;margin-left:10px;">저금통 ></span> <br><img src="/assets/freelancer/img/mypage_bank.png" style="max-width:20%;margin-bottom:10px;"><br> <span class="rNavLi_content" style="font-size:1.2rem;display:block;"><?=$this->session->userdata('AdminBid')?></span><br><span class="rNavLi_content rNaviLi_content_wb2"style="font-size:2.5rem;"><?=$this->session->userdata('TotalSavings')?></span>원</li>
                                    <li></li>
                                </ul>
                            </nav>
                        </header>
                    </div>


            <!-- </div> -->
            <!-- </a>
            <ul class="dropdown-menu animated fadeInLeft">
            <li><a href="/auth/logOutProc">Log Out</a></li>
            </ul>
        </li>
        </ul> -->
    </nav>
    
    <main class="main fixed main_tabs">
      
    <?if($this->session->userdata('AdminType')){?>
        <nav class="nav fixed nav_tabs">
            <a href="/Main2/missions" class="tabs nav_item_p"><img class="nav_img" id="missiontab" src="/assets/freelancer/img/nav_mission.png" height="32px"><br>노력해요</a>
            <a href="/Main2/needs" class="tabs nav_item_p"><img class="nav_img" id="needtab" src="/assets/freelancer/img/nav_need.png"  height="32px"><br>필요해요</a>
        </nav>
    <?}else{?>
        <nav class="nav fixed nav_tabs">
            <a id="ntab" href="/Main2/needs" class="tabs nav_item" data-tab="needs"><img class="nav_img" id="needtab" src="/assets/freelancer/img/nav_need.png"  height="32px"><br>필요해요</a>
            <a id="mtab" href="/Main2/missions" class="tabs nav_item" data-tab="missions"><img class="nav_img" id="missiontab" src="/assets/freelancer/img/nav_mission.png" height="32px"><br>노력해요</a>
            <a id="stab" href="/Main2/savings" class="tabs nav_item" data-tab="savings"><img class="nav_img" id="savingtab" src="/assets/freelancer/img/nav_saving.png" height="32px"><br>저금해요</a>
        </nav>
        <div id="mbadge" class="badge2"></div>
        <div id="sbadge" class="badge1"></div>
    <?}?>
    <script>
    function AddComma(data_value) {
        return Number(data_value).toLocaleString('en');
    }
    $(document).ready(function(){
        var wb = $('.rNaviLi_content_wb1').html();
        $('.rNaviLi_content_wb1').html(AddComma(wb));
        var wb = $('.rNaviLi_content_wb2').html();
        $('.rNaviLi_content_wb2').html(AddComma(wb));
        // menu click event
        var totalbalance = $("#totalbalance").html();
        $("#totalbalance").html(AddComma(totalbalance));
        var possibleprice = $(".possibleprice").html();
        $(".possibleprice").html(AddComma(possibleprice));
        $('.menuBtn').click(function() {
            $(this).toggleClass('act');
                if($(this).hasClass('act')) {
                    $('.mainMenu').addClass('act');
                }
                else {
                    $('.mainMenu').removeClass('act');
                    
                }
        });

        
    // var button = document.querySelector('#ssebtn');
    
    
    
    
    // button.onclick = function() {
        //     console.log('Connection closed');
        //     evtSource.close();
        // };
        
        
        
        // var tab_id = $(this).attr('data-tab');
        
        // $('.nav_item').removeClass('current');
        // // $('.tab-content').removeClass('current');
        
        // $(this).addClass('current');
        // $("#"+tab_id).addClass('current');
        
    });
        var evtSaving = new EventSource('/Sse/saving');

        evtSaving.addEventListener("message", function(event) {
            console.log("saving: "+event.data);
            let data = JSON.parse(event.data);
            let count = data.length;
            if(count!=0){
                $('.badge1:empty').css('display','block');
                $('#sbadge').html(count);
            }
        });

        evtSaving.onerror = function() {
            // console.log("EventSource failed.");
        };

        var newMissionCnt=0;

        var evtMissionAlarm = new EventSource('/Sse/mission');
        evtMissionAlarm.addEventListener("message", function(event) {
            

            let data = JSON.parse(event.data);
            
            
            if(data.length!=0){
                console.log("mission: "+event.data);
                newMissionCnt++;
                $('#mbadge').html(newMissionCnt);
                $('.badge2:empty').css('display','block');

                
            }
        });


        // var newMissionCnt=0;


        // var evtMissionAlarm = new EventSource('/Sse/mission');
        // evtMissionAlarm.onmessage = function(e) {
        //     console.log(e.data+"mission1");
            
        //     if(e.data!=0){
        //         newMissionCnt++;
        //         $('.badge2:empty').css('display','block');
        //         $('#mbadge').html(newMissionCnt);

                
        //     }

        // };

        
        // evtMCS.onmessage = function(e) {
        //     console.log(e.data+"gg");
        //     console.log(e.data[]);
        // };
        // evtMCS.onerror = function() {
        //     console.log("EventSource failed.");
        // };
        // var completedMissionCnt=0;
        // var p_evtMissionAlarm = enw EventSource('/Sse/p_mission');
        // p_evtMissionAlarm.onmessage = function(e) {
        //     console.log(e.data+"mission");
        //     if(e.data!=0){
        //         completedMissionCnt++;
        //         // $('.badge2:empty').css('display','block');
        //         // $('#mbadge').html(newMissionCnt);
        //     }
        // };
    </script>

